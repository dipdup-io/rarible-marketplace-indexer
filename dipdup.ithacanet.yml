datasources:
  tzkt_ithacanet:
    kind: tzkt
    url: ${TZKT_URL:-https://api.ithacanet.tzkt.io}

contracts:
  rarible_exchange_ithacanet:
    address: KT1K2mNPj9U9497KjUggkgGcuuPsKrLr34zW
    typename: rarible_exchange
  rarible_bids_ithacanet:
    address: KT1MwKGYWWbXtfYdnQfwspwz5ZGfqGwiJuQF
    typename: rarible_bids
  rarible_auctions_ithacanet:
    address: KT1CB5JBSC7kTxRV3ir2xsooMA1FLieiD4Mt
    typename: rarible_auctions

indexes:
  rarible_exchange_actions:
    kind: operation
    datasource: tzkt_ithacanet
    contracts:
      - rarible_exchange_ithacanet
    handlers:
      - callback: rarible_order_list
        pattern:
          - destination: rarible_exchange_ithacanet
            entrypoint: sell

      - callback: rarible_order_cancel_list
        pattern:
          - destination: rarible_exchange_ithacanet
            entrypoint: cancel_sale

      - callback: rarible_order_match
        pattern:
          - destination: rarible_exchange_ithacanet
            entrypoint: buy
  rarible_bids_actions:
    kind: operation
    datasource: tzkt_ithacanet
    contracts:
      - rarible_bids_ithacanet
    handlers:
      - callback: rarible_put_bid
        pattern:
          - destination: rarible_bids_ithacanet
            entrypoint: put_bid
      - callback: rarible_put_floor_bid
        pattern:
          - destination: rarible_bids_ithacanet
            entrypoint: put_floor_bid
      - callback: rarible_accept_bid
        pattern:
          - destination: rarible_bids_ithacanet
            entrypoint: accept_bid
      - callback: rarible_accept_floor_bid
        pattern:
          - destination: rarible_bids_ithacanet
            entrypoint: accept_floor_bid
      - callback: rarible_cancel_bid
        pattern:
          - destination: rarible_bids_ithacanet
            entrypoint: cancel_bid
      - callback: rarible_cancel_floor_bid
        pattern:
          - destination: rarible_bids_ithacanet
            entrypoint: cancel_floor_bid
  rarible_auctions_actions:
    kind: operation
    datasource: tzkt_ithacanet
    contracts:
      - rarible_auctions_ithacanet
    handlers:
      - callback: rarible_start_auction
        pattern:
          - destination: rarible_auctions_ithacanet
            entrypoint: start_auction
      - callback: rarible_put_auction_bid
        pattern:
          - destination: rarible_auctions_ithacanet
            entrypoint: put_bid
      - callback: rarible_finish_auction
        pattern:
          - destination: rarible_auctions_ithacanet
            entrypoint: finish_auction
      - callback: rarible_cancel_auction
        pattern:
          - destination: rarible_auctions_ithacanet
            entrypoint: cancel_auction

